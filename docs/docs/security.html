<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../icon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<script>
			const key = 'svelteness::color-scheme';
			const scheme = localStorage[key];
			const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (scheme === 'dark' || (scheme !== 'light' && prefersDark)) {
				document.documentElement.classList.add('dark');
			} else {
				document.documentElement.classList.remove('dark');
			}
		</script>

		<meta http-equiv="content-security-policy" content=""><title>Security | FastEndpoints</title>
		<meta name="description" content="A light-weight REST Api framework for ASP.Net 6 that implements REPR (Request-Endpoint-Response) Pattern." data-svelte="svelte-18oalgx">
	<link rel="stylesheet" href="/app_/immutable/assets/__layout-kit-docs-3905da1f.css">
	<link rel="stylesheet" href="/app_/immutable/assets/scroll-f726ebda.css">
	<link rel="modulepreload" href="/app_/immutable/start-cedea01d.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/index-6391be64.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/singletons-9fd4729a.js">
	<link rel="modulepreload" href="/app_/immutable/pages/__layout-kit-docs.svelte-d7ab6525.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/contexts-c56b72f8.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/scroll-4f99ad69.js">
	<link rel="modulepreload" href="/app_/immutable/pages/docs/__layout@kit-docs.svelte-cc9f912f.js">
	<link rel="modulepreload" href="/app_/immutable/pages/docs/_...2_security.md-6f8e9a26.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/CodeFence-e0140bb4.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/Link-69c668c2.js">
	<link rel="modulepreload" href="/app_/immutable/chunks/Admonition-a969bddf.js">
	</head>
	<body>
		<div>




<div class="kit-docs bg-gray-body min-h-full min-w-full h-full transition-transform duration-150 ease-out" style="font-family: var(--kd-font-family-sans, inherit); --kd--navbar-height: calc(var(--kd-navbar-height) + var(--kd-breadcrumbs-height));"><div class="fixed top-0 z-30 w-full flex-none transform-gpu transition-transform duration-150 ease-out supports-backdrop-blur:bg-white/60 bg-gray-200/95 backdrop-blur dark:bg-gray-800/60 translate-y-0" style="border-bottom: var(--kd-navbar-border-bottom);"><div class="flex w-full flex-col items-center justify-center mx-auto max-w-[var(--kd-navbar-max-width)] p-[var(--kd-navbar-padding)] h-[var(--kd--navbar-height)]"><div class="flex w-full items-center"><div class="logo svelte-122tfh4" slot="navbar-left">
  <a class="group transform-gpu text-lg font-medium transition-transform hover:scale-105" href="/">
    <span class="inline-block transform transition-transform duration-100 group-hover:translate-x-0"><img src="/icon.png" alt="FastEndpoints logo"></span>
    </a></div>
        

    <div class="flex-1"></div>

    <div class="992:hidden -mr-2 flex items-center">

      <div class="relative inline-block text-left not-prose"><button id="popover-button-4" type="button" class="inline-flex w-full justify-center rounded-md p-2 text-lg font-medium text-gray-soft hover:text-gray-inverse" aria-controls="popover-4" aria-expanded="false" aria-haspopup="true"><svg width="30" height="30" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><!-- HTML_TAG_START --><path fill="currentColor" d="M18 18v2H6v-2h12zm3-7v2H3v-2h18zm-3-7v2H6V4h12z"/><!-- HTML_TAG_END --></svg>
          <span class="sr-only">Main navigation menu</span>
        </button>

  <div class="fixed top-0 left-0 bg-black/40 backdrop-blur-sm dark:bg-gray-700/80 transition-opacity duration-75 pointer-events-auto z-40 w-screen h-screen opacity-0 invisible"></div>

  <div hidden></div>

</div></div>

    <div class="992:flex 992:items-center hidden"><nav><ul class="flex items-center space-x-8 text-lg font-medium"><li class="mt-4 first:mt-0 992:mt-0"><a class="p-1 border-b hover:border-b-2 border-brand text-gray-inverse" href="/docs">Documentation</a></li><li class="mt-4 first:mt-0 992:mt-0"><a class="p-1 text-gray-soft hover:text-gray-inverse" href="/benchmarks">Benchmarks</a></li><li class="mt-4 first:mt-0 992:mt-0"><a class="p-1 text-gray-soft hover:text-gray-inverse" href="https://dev.to/djnitehawk/building-rest-apis-in-net-6-the-easy-way-3h0d" target="_blank">Tutorial</a></li><li class="mt-4 first:mt-0 992:mt-0"><a class="p-1 text-gray-soft hover:text-gray-inverse" href="https://dev.to/djnitehawk/building-rest-apis-in-net-6-the-easy-way-3h0d" target="_blank">API Reference</a></li><li class="mt-4 first:mt-0 992:mt-0"><a class="p-1 text-gray-soft hover:text-gray-inverse" href="https://www.paypal.com/donate/?hosted_button_id=AU3SCQX9FXYCS" target="_blank">Donate</a></li></ul></nav>

      
        

      <div class="border-gray-divider ml-6 mr-2.5 h-7 w-2 border-l-[1.5px]"></div>

      <div class="hidden 992:flex items-center"><div class="socials flex flex-row" slot="navbar-right-alt"><a class="relative flex items-center text-gray-soft hover:text-gray-inverse border-0 rounded-md p-2" href="https://github.com/dj-nitehawk/FastEndpoints" target="_blank"><svg width="28" height="28" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class=""><!-- HTML_TAG_START --><path fill="currentColor" d="M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476c0-.237-.013-1.024-.013-1.862c-2.512.463-3.162-.612-3.362-1.175c-.113-.288-.6-1.175-1.025-1.413c-.35-.187-.85-.65-.013-.662c.788-.013 1.35.725 1.538 1.025c.9 1.512 2.338 1.087 2.912.825c.088-.65.35-1.087.638-1.337c-2.225-.25-4.55-1.113-4.55-4.938c0-1.088.387-1.987 1.025-2.688c-.1-.25-.45-1.275.1-2.65c0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337c1.912-1.3 2.75-1.024 2.75-1.024c.55 1.375.2 2.4.1 2.65c.637.7 1.025 1.587 1.025 2.687c0 3.838-2.337 4.688-4.562 4.938c.362.312.675.912.675 1.85c0 1.337-.013 2.412-.013 2.75c0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10z"/><!-- HTML_TAG_END --></svg>
  <span class="sr-only">GitHub</span>
  </a>
			<a class="relative flex items-center text-gray-soft hover:text-gray-inverse border-0 rounded-md p-2" href="https://discord.com/invite/yQZ4uvfF2E" target="_blank"><svg width="28" height="28" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class=""><!-- HTML_TAG_START --><path fill="currentColor" d="M10.076 11c.6 0 1.086.45 1.075 1c0 .55-.474 1-1.075 1C9.486 13 9 12.55 9 12s.475-1 1.076-1zm3.848 0c.601 0 1.076.45 1.076 1s-.475 1-1.076 1c-.59 0-1.075-.45-1.075-1s.474-1 1.075-1zm4.967-9C20.054 2 21 2.966 21 4.163V23l-2.211-1.995l-1.245-1.176l-1.317-1.25l.546 1.943H5.109C3.946 20.522 3 19.556 3 18.359V4.163C3 2.966 3.946 2 5.109 2H18.89zm-3.97 13.713c2.273-.073 3.148-1.596 3.148-1.596c0-3.381-1.482-6.122-1.482-6.122c-1.48-1.133-2.89-1.102-2.89-1.102l-.144.168c1.749.546 2.561 1.334 2.561 1.334a8.263 8.263 0 0 0-3.096-1.008a8.527 8.527 0 0 0-2.077.02c-.062 0-.114.011-.175.021c-.36.032-1.235.168-2.335.662c-.38.178-.607.305-.607.305s.854-.83 2.705-1.376l-.103-.126s-1.409-.031-2.89 1.103c0 0-1.481 2.74-1.481 6.121c0 0 .864 1.522 3.137 1.596c0 0 .38-.472.69-.871c-1.307-.4-1.8-1.24-1.8-1.24s.102.074.287.179c.01.01.02.021.041.031c.031.022.062.032.093.053c.257.147.514.262.75.357c.422.168.926.336 1.513.452a7.06 7.06 0 0 0 2.664.01a6.666 6.666 0 0 0 1.491-.451c.36-.137.761-.337 1.183-.62c0 0-.514.861-1.862 1.25c.309.399.68.85.68.85z"/><!-- HTML_TAG_END --></svg>
  <span class="sr-only">Discord</span>
  </a></div>
        
        <div class="relative inline-block text-left not-prose"><button id="menu-button-4" type="button" class="inline-flex w-full justify-center rounded-md p-2 text-lg font-medium text-gray-soft hover:text-gray-inverse" aria-controls="menu-4" aria-expanded="false" aria-haspopup="true"><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="h-6 w-6"><!-- HTML_TAG_START --><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/><!-- HTML_TAG_END --></svg>
    <span class="sr-only">Color Scheme</span>
  </button>

  <div hidden></div>

</div></div></div></div>

  <div class="border-gray-divider 992:hidden flex w-full items-center mt-4 pt-4 border-t"><button id="main-sidebar-button" type="button" class="text-gray-soft hover:text-gray-inverse inline-flex justify-center rounded-md p-2 text-sm font-medium" aria-controls="main-sidebar" aria-expanded="false" aria-haspopup="true"><span class="sr-only">Open main sidebar</span>
                  <svg width="28" height="28" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><!-- HTML_TAG_START --><path fill="currentColor" d="M21 18v2H3v-2h18zM17.05 3.55L22 8.5l-4.95 4.95v-9.9zM12 11v2H3v-2h9zm0-7v2H3V4h9z"/><!-- HTML_TAG_END --></svg></button>

              <ol class="text-md text-gray-soft flex items-center whitespace-nowrap leading-6 mt-px ml-2.5">
                  <li class="truncate font-semibold text-slate-900 dark:text-slate-200">Security</li></ol></div>

          
        </div></div>

  <div class="mx-auto w-full flex flex-row min-h-full max-w-[var(--kd-content-max-width)] pt-[var(--kd--navbar-height)] z-20"><aside id="main-sidebar" class="sidebar self-start fixed top-0 left-0 transform bg-gray-body z-50 border-gray-divider border-r -translate-x-full transform transition-transform duration-200 ease-out will-change-transform max-h-screen min-h-screen min-w-[var(--kd-sidebar-min-width)] max-w-[var(--kd-sidebar-max-width)] 992:translate-x-0 922:block 992:sticky 992:z-0 overflow-y-auto p-[var(--kd-sidebar-padding)] 992:top-[var(--kd--navbar-height)] 992:min-h-[calc(100vh-var(--kd--navbar-height))] 992:max-h-[calc(100vh-var(--kd--navbar-height))]" role="dialog" aria-modal="true" style=""><div class="992:hidden sticky top-0 left-0 flex items-center"><div class="flex-1"></div>
    <button class="text-gray-soft hover:text-gray-inverse p-4 -mx-6 pointer-events-none"><svg width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><!-- HTML_TAG_START --><path fill="currentColor" d="m12 10.586l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.414 1.414l-4.95-4.95l-4.95 4.95l-1.414-1.414l4.95-4.95l-4.95-4.95L7.05 5.636z"/><!-- HTML_TAG_END --></svg>
      <span class="sr-only">Close sidebar</span></button></div>

  <nav class="992:px-1">

    

    <ul class="mt-8 pb-28 992:pb-0">
        <li class="992:mt-10 mt-12 first:mt-0"><div class="mt-10"></div>
          <ul class="border-gray-divider space-y-3 border-l"><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/get-started" style="">
                  Get Started
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 text-brand font-semibold" href="/docs/security" style="border-color: var(--kd-sidebar-border-active);">
                  Security
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/model-binding" style="">
                  Model Binding
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/validation" style="">
                  Validation
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/dependency-injection" style="">
                  Dependency Injection
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/domain-entity-mapping" style="">
                  Domain Entity Mapping
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/file-handling" style="">
                  File Handling
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/response-caching" style="">
                  Response Caching
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/pre-post-processors" style="">
                  Pre / Post Processors
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/event-notifications" style="">
                  Event / Notifications
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/server-sent-events" style="">
                  Server Sent Events
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/exception-handler." style="">
                  Exception Handler
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/integration-unit-testing" style="">
                  Integration / Unit Testing
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/misc-conveniences" style="">
                  Misc Conveniences
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/swagger-support" style="">
                  Swagger Support
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/configuration-settings" style="">
                  Configuration Settings
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/api-versioning" style="">
                  API Versioning
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/rate-limiting" style="">
                  Rate Limiting
                  </a>
              </li><li class="first:mt-6"><a class="992:py-1.5 -ml-px flex items-center border-l-2 py-2 pl-4 hover:border-gray-inverse text-gray-soft hover:text-gray-inverse border-transparent font-normal" href="/docs/feature-scaffolding" style="">
                  Feature Scaffolding
                  </a>
              </li></ul>
        </li></ul>

    
        </nav></aside>

<div class="992:hidden z-40"><div class="fixed top-0 left-0 bg-black/40 backdrop-blur-sm dark:bg-gray-700/80 transition-opacity duration-75 pointer-events-auto z-40 w-screen h-screen opacity-0 invisible"></div></div>

    <main class="w-full overflow-x-hidden 992:min-h-[calc(100vh-var(--kd--navbar-height))] min-h-[calc(100vh-var(--kd--navbar-height))] px-8 992:px-16 pt-8" style="max-width: var(--kd-main-max-width, var(--kd-article-max-width));">

      <article class="markdown prose dark:prose-invert z-10 max-w-[var(--kd-article-max-width)]">

          

<h1>Security</h1>
<h2 id="securing-endpoints" tabindex="-1">
<a class="header-anchor" href="#securing-endpoints" aria-hidden="true">#</a> Securing Endpoints</h2>
<p>Endpoints are secure by default and you&#39;d have to call <strong>AllowAnonymous()</strong> in the configuration if you&#39;d like to allow unauthenticated users to access a particular endpoint.</p>
<h2 id="jwt-bearer-authentication" tabindex="-1">
<a class="header-anchor" href="#jwt-bearer-authentication" aria-hidden="true">#</a> JWT Bearer Authentication</h2>
<p>Support for easy JWT Bearer Authentication is provided.
You simply need to install the <strong>FastEndpoints.Security</strong> package and register it in the middleware pipeline like so:</p>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-bash ext-sh" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">terminal</span>

      <div class="flex-1"></div>

      <button type="button" class="mr-2 px-2 py-1 hover:text-white"><div class="text-white absolute top-2.5 right-4 transition-opacity z-10 duration-300 px-2 py-1 rounded-md ease-out text-sm font-mono hidden opacity-0" aria-hidden="true" style="background-color: var(--kd-code-copied-bg-color);">Copied!</div>

          <svg width="24" height="24" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="opacity-100 transition-opacity duration-600 ease-in"><!-- HTML_TAG_START --><path fill="currentColor" d="M7 6V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1.001 1.001 0 0 1 3 21l.003-14c0-.552.45-1 1.007-1H7zM5.003 8L5 20h10V8H5.003zM9 6h8v10h2V4H9v2z"/><!-- HTML_TAG_END --></svg>
          <span class="sr-only">Copy code</span></button></div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #ABB2BF">  dotnet add package FastEndpoints.Security</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">Program.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #E06C75">global</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">using</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FastEndpoints</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E06C75">global</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">using</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FastEndpoints</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Security</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">//add this</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">builder</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">WebApplication</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">CreateBuilder</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Services</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddFastEndpoints</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Services</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddAuthenticationJWTBearer</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;TokenSigningKey&quot;</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//add this</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">app</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">Build</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">UseAuthentication</span><span style="color: #ABB2BF">(); </span><span style="color: #7F848E; font-style: italic">//add this</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">UseAuthorization</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">UseFastEndpoints</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">Run</span><span style="color: #ABB2BF">();</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><h2 id="generating-jwt-tokens" tabindex="-1">
<a class="header-anchor" href="#generating-jwt-tokens" aria-hidden="true">#</a> Generating JWT Tokens</h2>
<p>You can generate a JWT token for sending to the client with an endpoint that signs in users like so:</p>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);">

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">UserLoginEndpoint</span><span style="color: #ABB2BF"> : </span><span style="color: #E5C07B">Endpoint</span><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">LoginRequest</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Configure</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Post</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/api/login&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">AllowAnonymous</span><span style="color: #ABB2BF">();</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">async</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Task</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">HandleAsync</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">LoginRequest</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">req</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">CancellationToken</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">ct</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">req</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Username</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;admin&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">req</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Password</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;pass&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">jwtToken</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">JWTBearer</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">CreateToken</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">signingKey</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;TokenSigningKey&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">expireAt</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">DateTime</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">UtcNow</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddDays</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">claims</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF">[] { (</span><span style="color: #98C379">&quot;Username&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">req</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Username</span><span style="color: #ABB2BF">), (</span><span style="color: #98C379">&quot;UserID&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;001&quot;</span><span style="color: #ABB2BF">) },</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">roles</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF">[] { </span><span style="color: #98C379">&quot;Admin&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;Management&quot;</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">permissions</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF">[] { </span><span style="color: #98C379">&quot;ManageInventory&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;ManageUsers&quot;</span><span style="color: #ABB2BF"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">await</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">SendAsync</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">new</span></span>
<span class="line"><span style="color: #ABB2BF">            {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">Username</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">req</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Username</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">Token</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">jwtToken</span></span>
<span class="line"><span style="color: #ABB2BF">            });</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">else</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">ThrowError</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;The supplied credentials are invalid!&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><h2 id="endpoint-authorization" tabindex="-1">
<a class="header-anchor" href="#endpoint-authorization" aria-hidden="true">#</a> Endpoint Authorization</h2>
<p>Once an authentication provider is registered such as JWT Bearer as shown above, you can restrict access to users based on the following:</p>
<ul><li>Policies</li>
<li>Claims</li>
<li>Roles</li>
<li>Permissions</li></ul>
<h2 id="pre-built-security-policies" tabindex="-1">
<a class="header-anchor" href="#pre-built-security-policies" aria-hidden="true">#</a> Pre-Built Security Policies</h2>
<p>Security policies can be pre-built and registered during app startup and endpoints can choose to allow access to users based on the registered policy names like so:</p>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">Program.cs(Configure Services)</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"></span>
<span class="line"><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Services</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddAuthorization</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF"> =&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddPolicy</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;ManagersOnlyPolicy&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">x</span><span style="color: #ABB2BF"> =&gt; </span><span style="color: #E5C07B">x</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">RequireRole</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Manager&quot;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">RequireClaim</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;ManagerID&quot;</span><span style="color: #ABB2BF">));</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">UpdateUserEndpoint.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">UpdateUserEndpoint</span><span style="color: #ABB2BF"> : </span><span style="color: #E5C07B">Endpoint</span><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">UpdateUserRequest</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Configure</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Verbs</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">PUT</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Routes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/api/users/update&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Policies</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;ManagersOnlyPolicy&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><h2 id="declarative-security-policies" tabindex="-1">
<a class="header-anchor" href="#declarative-security-policies" aria-hidden="true">#</a> Declarative Security Policies</h2>
<p>Instead of registering each security policy at startup you can selectively specify security requirements for each endpoint in the endpoint configuration itself like so:</p>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">RestrictedEndpoint.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">RestrictedEndpoint</span><span style="color: #ABB2BF"> : </span><span style="color: #E5C07B">Endpoint</span><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">RestrictedRequest</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Configure</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Verbs</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">POST</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Routes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/api/restricted&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Claims</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;AdminID&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;EmployeeID&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Roles</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Admin&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;Manager&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Permissions</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;UpdateUsersPermission&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;DeleteUsersPermission&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><h3 id="claims-method" tabindex="-1">
<a class="header-anchor" href="#claims-method" aria-hidden="true">#</a> Claims() method</h3>
<ul><li>With this method you are specifying that if a user principal has ANY of the specified claims, access should be allowed. if the requirement is to allow access only if ALL specified claims are present, you can use the <strong>ClaimsAll()</strong> method.</li></ul>
<h3 id="permissions-method" tabindex="-1">
<a class="header-anchor" href="#permissions-method" aria-hidden="true">#</a> Permissions() method</h3>
<ul><li>Just like above, you can specify that ANY of the specified permissions should allow access. Or require ALL of the specified permissions by using the <strong>PermissionsAll()</strong> method.</li></ul>
<h3 id="roles-method" tabindex="-1">
<a class="header-anchor" href="#roles-method" aria-hidden="true">#</a> Roles() method</h3>
<ul><li>Similarly, you are specifying that ANY of the given roles should allow access to a user principal who has it.</li></ul>
<h3 id="allowanonymous-method" tabindex="-1">
<a class="header-anchor" href="#allowanonymous-method" aria-hidden="true">#</a> AllowAnonymous() method</h3>
<ul><li>Use this method if you&#39;d like to allow unauthenticated users to access a particular endpoint. it is also possible to specify which http verbs you&#39;d like to allow anonymous access to like so:</li></ul>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">RestrictedEndpoint.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">RestrictedEndpoint</span><span style="color: #ABB2BF"> : </span><span style="color: #E5C07B">Endpoint</span><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">RestrictedRequest</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Configure</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Verbs</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">POST</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">PUT</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">PATCH</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">Routes</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/api/restricted&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">AllowAnonymous</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Http</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">POST</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><p>The above endpoint is listening for all 3 http methods on the same route but only <strong>POST</strong> method is allowed to be accessed anonymously.
It is useful for example when you&#39;d like to use the same handler logic for create/replace/update scenarios and create operation is allowed to be done by anonymous users.</p>
<p>Using just <strong>AllowAnonymous()</strong> without any arguments means all verbs are allowed anonymous access.</p>
<h2 id="other-auth-providers" tabindex="-1">
<a class="header-anchor" href="#other-auth-providers" aria-hidden="true">#</a> Other Auth Providers</h2>
<p>All auth providers compatible with the ASP.NET middleware pipeline can be registered and used like above.</p>
<div class="admonition my-8 border-2 border-l-8 p-4 rounded-md mx-auto shadow-xl border-blue-400 bg-blue-300/10"><div class="flex h-full items-center font-bold text-blue-400"><svg width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="mr-1.5 text-xl"><!-- HTML_TAG_START --><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10zm-1-11v6h2v-6h-2zm0-4v2h2V7h-2z"/><!-- HTML_TAG_END --></svg>
    <span class="flex items-center">INFO</span></div>

  <div class="pl-1 text-lg text-gray-inverse"><p>Here&#39;s an 
<a href="https://github.com/dj-nitehawk/FastEndpoints-Auth0-Demo" target="_blank" rel="noopener noreferrer">example project</a> using 
<a href="https://auth0.com/access-management" target="_blank" rel="noopener noreferrer">Auth0</a> with permissions.</p></div></div>
<h2 id="multiple-authentication-schemes" tabindex="-1">
<a class="header-anchor" href="#multiple-authentication-schemes" aria-hidden="true">#</a> Multiple Authentication Schemes</h2>
<p>It is possible to register multiple auth schemes at startup and specify per endpoint which schemes are to be used for authenticating incoming requests.</p>
<div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">Program.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Services</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddAuthentication</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF"> =&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">DefaultAuthenticateScheme</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CookieAuthenticationDefaults</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">AuthenticationScheme</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">DefaultChallengeScheme</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CookieAuthenticationDefaults</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">AuthenticationScheme</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddCookie</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF"> =&gt; </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">SlidingExpiration</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">// cookie auth</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">AddJwtBearer</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF"> =&gt;                          </span><span style="color: #7F848E; font-style: italic">// jwt bearer auth</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Authority</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">$&quot;https://{</span><span style="color: #E5C07B">builder</span><span style="color: #98C379">.</span><span style="color: #E5C07B">Configuration</span><span style="color: #98C379">[&quot;Auth0:Domain&quot;]}/&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">options</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Audience</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">builder</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Configuration</span><span style="color: #ABB2BF">[</span><span style="color: #98C379">&quot;Auth0:Audience&quot;</span><span style="color: #ABB2BF">];</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><div class="code-fence overflow-y-auto relative max-h-[60vh] 576:max-h-[32rem] my-8 rounded-md shadow-lg mx-auto border border-gray-divider lang-csharp ext-cs" style="background-color: var(--kd-code-fence-bg);"><div class="sticky top-0 left-0 z-10 flex items-center rounded-md pt-2 backdrop-blur supports-backdrop-blur:bg-white/60" style="background-color: var(--kd-code-fence-top-bar-bg);"><span class="ml-3.5 font-mono text-sm text-gray-300">Endpoint.cs</span>

      <div class="flex-1"></div>

      </div>

  <div class="code relative z-0 overflow-hidden"><div class=""><!-- HTML_TAG_START --><pre><code><span class="line"><span style="color: #C678DD">public</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">override</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Configure</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">Get</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;/account/profile&quot;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">AuthSchems</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">JwtBearerDefaults</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">AuthenticationScheme</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><!-- HTML_TAG_END --></div>

    

    </div></div><p>In the above example, we&#39;re registering both <strong>Cookie</strong> and <strong>JWT Bearer</strong> auth schemes and in the endpoint we&#39;re saying <strong>only JWT Bearer</strong> auth scheme should be used for authenticating incoming requests to the endpoint.
You can specify multiple schemes and if an incoming request isn&#39;t using any of the said schemes, access will not be allowed.</p></article>

      <hr class="border-gray-divider mt-20">

        <div class="992:text-xl flex items-center pt-12 pb-20 text-lg font-semibold text-gray-300"><div class="mb-4 flex flex-col items-start"><span class="text-gray-inverse ml-3 mb-4 inline-block">Previous</span>
              
  <a class="group transform-gpu text-lg font-medium transition-transform hover:scale-105 hover:text-gray-inverse" href="/docs/get-started" sveltekit:prefetch><span class="opacity-0 transition-opacity duration-100 group-hover:visible group-hover:opacity-100 inline-block">&lt;-</span>
    <span class="inline-block transform transition-transform duration-100 group-hover:translate-x-0 -translate-x-3 ">Get Started</span>
    </a></div>

          <div class="ml-auto mb-4 flex flex-col items-end"><span class="text-gray-inverse mr-3 mb-4 inline-block">Next</span>
              
  <a class="group transform-gpu text-lg font-medium transition-transform hover:scale-105 hover:text-gray-inverse" href="/docs/model-binding" sveltekit:prefetch>
    <span class="inline-block transform transition-transform duration-100 group-hover:translate-x-0 translate-x-2">Model Binding</span>
    <span class="opacity-0 transition-opacity duration-100 group-hover:visible group-hover:opacity-100 inline-block">-&gt;</span></a></div></div>

      <div slot="main-bottom" class="footer"></div></main>

    <div class="992:flex-1"></div>

    <div class="on-this-page pt-8 pb-8 hidden overflow-auto min-w-[160px] sticky right-4 pr-4 1440:right-6 1440:pr-2 1280:block pl-0.5 top-[var(--kd--navbar-height)] max-h-[calc(100vh-var(--kd--navbar-height))]" style=""><h5 class="font-semibold w-full text-left text-gray-inverse text-lg">On this page</h5>
    <ul class="space-y-4 mt-4"><li class="text-gray-soft hover:text-gray-inverse"><a href="#securing-endpoints">Securing Endpoints</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#jwt-bearer-authentication">JWT Bearer Authentication</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#generating-jwt-tokens">Generating JWT Tokens</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#endpoint-authorization">Endpoint Authorization</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#pre-built-security-policies">Pre-Built Security Policies</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#declarative-security-policies">Declarative Security Policies</a></li>
        <ul class="space-y-3"><li class="flex group group text-gray-soft hover:text-gray-inverse"><svg width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="mr-px mt-px text-gray-300 dark:text-gray-400 group-hover:text-gray-soft"><!-- HTML_TAG_START --><path fill="currentColor" d="M12.172 12L9.343 9.172l1.414-1.415L15 12l-4.243 4.243l-1.414-1.415z"/><!-- HTML_TAG_END --></svg>
                <a href="#claims-method">Claims() method</a>
              </li><li class="flex group group text-gray-soft hover:text-gray-inverse"><svg width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="mr-px mt-px text-gray-300 dark:text-gray-400 group-hover:text-gray-soft"><!-- HTML_TAG_START --><path fill="currentColor" d="M12.172 12L9.343 9.172l1.414-1.415L15 12l-4.243 4.243l-1.414-1.415z"/><!-- HTML_TAG_END --></svg>
                <a href="#permissions-method">Permissions() method</a>
              </li><li class="flex group group text-gray-soft hover:text-gray-inverse"><svg width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="mr-px mt-px text-gray-300 dark:text-gray-400 group-hover:text-gray-soft"><!-- HTML_TAG_START --><path fill="currentColor" d="M12.172 12L9.343 9.172l1.414-1.415L15 12l-4.243 4.243l-1.414-1.415z"/><!-- HTML_TAG_END --></svg>
                <a href="#roles-method">Roles() method</a>
              </li><li class="flex group group text-gray-soft hover:text-gray-inverse"><svg width="20" height="20" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" class="mr-px mt-px text-gray-300 dark:text-gray-400 group-hover:text-gray-soft"><!-- HTML_TAG_START --><path fill="currentColor" d="M12.172 12L9.343 9.172l1.414-1.415L15 12l-4.243 4.243l-1.414-1.415z"/><!-- HTML_TAG_END --></svg>
                <a href="#allowanonymous-method">AllowAnonymous() method</a>
              </li>
          </ul><li class="text-gray-soft hover:text-gray-inverse"><a href="#other-auth-providers">Other Auth Providers</a></li>
        <li class="text-gray-soft hover:text-gray-inverse"><a href="#multiple-authentication-schemes">Multiple Authentication Schemes</a></li>
        </ul></div></div></div>


		<script type="module" data-sveltekit-hydrate="aqlhnh">
		import { start } from "/app_/immutable/start-cedea01d.js";
		start({
			target: document.querySelector('[data-sveltekit-hydrate="aqlhnh"]').parentNode,
			paths: {"base":"","assets":""},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [2, 3, 16],
				params: {"2":""},
				routeId: "docs/[...2]security"
			}
		});
	</script><script type="application/json" sveltekit:data-type="data" sveltekit:data-url="/kit-docs/docs_security.meta.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"excerpt\":\"\",\"headers\":[{\"level\":2,\"title\":\"Securing Endpoints\",\"slug\":\"securing-endpoints\",\"children\":[]},{\"level\":2,\"title\":\"JWT Bearer Authentication\",\"slug\":\"jwt-bearer-authentication\",\"children\":[]},{\"level\":2,\"title\":\"Generating JWT Tokens\",\"slug\":\"generating-jwt-tokens\",\"children\":[]},{\"level\":2,\"title\":\"Endpoint Authorization\",\"slug\":\"endpoint-authorization\",\"children\":[]},{\"level\":2,\"title\":\"Pre-Built Security Policies\",\"slug\":\"pre-built-security-policies\",\"children\":[]},{\"level\":2,\"title\":\"Declarative Security Policies\",\"slug\":\"declarative-security-policies\",\"children\":[{\"level\":3,\"title\":\"Claims() method\",\"slug\":\"claims-method\",\"children\":[]},{\"level\":3,\"title\":\"Permissions() method\",\"slug\":\"permissions-method\",\"children\":[]},{\"level\":3,\"title\":\"Roles() method\",\"slug\":\"roles-method\",\"children\":[]},{\"level\":3,\"title\":\"AllowAnonymous() method\",\"slug\":\"allowanonymous-method\",\"children\":[]}]},{\"level\":2,\"title\":\"Other Auth Providers\",\"slug\":\"other-auth-providers\",\"children\":[]},{\"level\":2,\"title\":\"Multiple Authentication Schemes\",\"slug\":\"multiple-authentication-schemes\",\"children\":[]}],\"title\":\"Security\",\"description\":\"A light-weight REST Api framework for ASP.Net 6 that implements REPR (Request-Endpoint-Response) Pattern.\",\"frontmatter\":{\"title\":\"Security\",\"description\":\"A light-weight REST Api framework for ASP.Net 6 that implements REPR (Request-Endpoint-Response) Pattern.\"},\"lastUpdated\":1658307580218}"}</script>
	<script type="application/json" sveltekit:data-type="data" sveltekit:data-url="/kit-docs/docs.sidebar.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"links\":{\".\":[{\"title\":\"Get Started\",\"slug\":\"/docs/get-started\"},{\"title\":\"Security\",\"slug\":\"/docs/security\"},{\"title\":\"Model Binding\",\"slug\":\"/docs/model-binding\"},{\"title\":\"Validation\",\"slug\":\"/docs/validation\"},{\"title\":\"Dependency Injection\",\"slug\":\"/docs/dependency-injection\"},{\"title\":\"Domain Entity Mapping\",\"slug\":\"/docs/domain-entity-mapping\"},{\"title\":\"File Handling\",\"slug\":\"/docs/file-handling\"},{\"title\":\"Response Caching\",\"slug\":\"/docs/response-caching\"},{\"title\":\"Pre / Post Processors\",\"slug\":\"/docs/pre-post-processors\"},{\"title\":\"Event / Notifications\",\"slug\":\"/docs/event-notifications\"},{\"title\":\"Server Sent Events\",\"slug\":\"/docs/server-sent-events\"},{\"title\":\"Exception Handler\",\"slug\":\"/docs/exception-handler.\"},{\"title\":\"Integration / Unit Testing\",\"slug\":\"/docs/integration-unit-testing\"},{\"title\":\"Misc Conveniences\",\"slug\":\"/docs/misc-conveniences\"},{\"title\":\"Swagger Support\",\"slug\":\"/docs/swagger-support\"},{\"title\":\"Configuration Settings\",\"slug\":\"/docs/configuration-settings\"},{\"title\":\"API Versioning\",\"slug\":\"/docs/api-versioning\"},{\"title\":\"Rate Limiting\",\"slug\":\"/docs/rate-limiting\"},{\"title\":\"Feature Scaffolding\",\"slug\":\"/docs/feature-scaffolding\"}]}}"}</script></div>
	</body>
</html>
